# LibreChat Configuration
# Documentation: https://www.librechat.ai/docs/configuration/librechat_yaml

version: 1.2.9

cache: true

# Interface Configuration
interface:
  modelSelect: true
  parameters: true
  presets: true

# Define custom endpoints
endpoints:
  # OpenRouter endpoint for LLM models
  custom:
    - name: "OpenRouter"
      type: openai
      baseURL: "https://openrouter.ai/api/v1"
      apiKey: "${OPENROUTER_API_KEY}"
      headers:
        HTTP-Referer: "${APP_URL:-http://localhost:3080}"
        X-Title: "Web-Agent-LibreChat"
      modelDisplayLabel: "OpenRouter"
      titleConvo: true
      titleModel: "anthropic/claude-3.5-sonnet"
      models:
        default:
          - "anthropic/claude-3.5-sonnet"
          - "anthropic/claude-3-opus"
          - "openai/gpt-4-turbo"
          - "openai/gpt-4"
          - "openai/gpt-3.5-turbo"
          - "meta-llama/llama-3.1-70b-instruct"
          - "meta-llama/llama-3.1-8b-instruct"
          - "google/gemini-pro"
          - "mistralai/mistral-large"
        fetch: true
  
  # Agent configuration
  agents:
    recursionLimit: 100
    maxRecursionLimit: 100

# Model Context Protocol (MCP) Server Configuration
# FastMCP with SSE transport (similar to sagemind architecture)
mcpServers:
  web-agent-mcp:
    type: sse
    url: "http://mcp-server:8000/sse"
    timeout: 600000
    initTimeout: 600000
    serverInstructions: true
    chatMenu: true
    startup: true

# Registration and Authentication
registration:
  socialLogins: []
  allowedDomains: []

# File handling
fileConfig:
  endpoints:
    OpenRouter:
      disabled: false
      fileLimit: 5
      fileSizeLimit: 10  # MB
      totalSizeLimit: 50  # MB
      supportedMimeTypes:
        - "image/jpeg"
        - "image/jpg"
        - "image/png"
        - "image/webp"
        - "text/plain"
        - "application/pdf"

# Rate limiting
rateLimits:
  fileUploads:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60
  conversationsImport:
    ipMax: 10
    ipWindowInMinutes: 60
    userMax: 5
    userWindowInMinutes: 60

# Model Specifications
modelSpecs:
  enforce: false
  prioritize: true
  list:
    - name: "anthropic/claude-3.5-sonnet"
      label: "Claude 3.5 Sonnet"
      description: "Most intelligent model from Anthropic"
      preset:
        endpoint: "OpenRouter"
        modelLabel: "Claude 3.5 Sonnet"
    - name: "openai/gpt-4-turbo"
      label: "GPT-4 Turbo"
      description: "Most capable GPT-4 model"
      preset:
        endpoint: "OpenRouter"
        modelLabel: "GPT-4 Turbo"
    - name: "meta-llama/llama-3.1-70b-instruct"
      label: "Llama 3.1 70B"
      description: "Meta's most capable open model"
      preset:
        endpoint: "OpenRouter"
        modelLabel: "Llama 3.1 70B"
