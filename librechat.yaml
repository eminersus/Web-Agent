# LibreChat Configuration
# Documentation: https://www.librechat.ai/docs/configuration/librechat_yaml

version: 1.1.5

cache: true

# Define custom endpoints
endpoints:
  # OpenRouter endpoint for LLM models
  custom:
    - name: "OpenRouter"
      apiKey: "${OPENROUTER_API_KEY}"
      baseURL: "https://openrouter.ai/api/v1"
      models:
        default:
          - "anthropic/claude-3.5-sonnet"
          - "anthropic/claude-3-opus"
          - "openai/gpt-4-turbo"
          - "openai/gpt-4"
          - "openai/gpt-3.5-turbo"
          - "meta-llama/llama-3.1-70b-instruct"
          - "meta-llama/llama-3.1-8b-instruct"
          - "google/gemini-pro"
          - "mistralai/mistral-large"
        fetch: true
      titleConvo: true
      titleModel: "anthropic/claude-3.5-sonnet"
      summarize: false
      summaryModel: "openai/gpt-3.5-turbo"
      forcePrompt: false
      modelDisplayLabel: "OpenRouter"
      addParams:
        headers:
          "HTTP-Referer": "${APP_URL:-http://localhost:3080}"
          "X-Title": "Web-Agent-LibreChat"

# Model Context Protocol (MCP) Server Configuration
# The MCP server provides tools and resources to the LLM
mcpServers:
  web-agent-tools:
    type: streamable-http
    url: "http://mcp-server:8001/mcp"
    description: "Web Agent MCP Server providing tools for time, calculations, web search, weather, tasks, and text analysis"
    initTimeout: 15000
    timeout: 60000
    serverInstructions: |
      You have access to the following tools:
      - get_current_time: Get the current date and time
      - calculate: Perform mathematical calculations
      - search_web: Search the web (placeholder)
      - get_weather: Get weather information (placeholder)
      - create_task: Create tasks and reminders
      - analyze_text: Analyze text for sentiment, keywords, or summary

# Interface Configuration
interface:
  # Privacy and Terms
  privacyPolicy:
    externalUrl: ""
    openNewTab: true
  termsOfService:
    externalUrl: ""
    openNewTab: true

# Registration and Authentication
registration:
  socialLogins: []
  allowedDomains: []
  enabled: true  # Enable user registration

# File handling
fileConfig:
  endpoints:
    OpenRouter:
      disabled: false
      fileLimit: 5
      fileSizeLimit: 10  # MB
      totalSizeLimit: 50  # MB
      supportedMimeTypes:
        - "image/jpeg"
        - "image/jpg"
        - "image/png"
        - "image/webp"
        - "text/plain"
        - "application/pdf"

# Rate limiting
rateLimits:
  fileUploads:
    ipMax: 100
    ipWindowInMinutes: 60
    userMax: 50
    userWindowInMinutes: 60
  conversationsImport:
    ipMax: 10
    ipWindowInMinutes: 60
    userMax: 5
    userWindowInMinutes: 60

# Model Specifications
modelSpecs:
  enforce: false
  prioritize: true
  list:
    - name: "anthropic/claude-3.5-sonnet"
      label: "Claude 3.5 Sonnet"
      description: "Most intelligent model from Anthropic"
      iconURL: ""
      preset:
        endpoint: "OpenRouter"
        modelLabel: "Claude 3.5 Sonnet"
    - name: "openai/gpt-4-turbo"
      label: "GPT-4 Turbo"
      description: "Most capable GPT-4 model"
      preset:
        endpoint: "OpenRouter"
        modelLabel: "GPT-4 Turbo"
    - name: "meta-llama/llama-3.1-70b-instruct"
      label: "Llama 3.1 70B"
      description: "Meta's most capable open model"
      preset:
        endpoint: "OpenRouter"
        modelLabel: "Llama 3.1 70B"

